<script type="module">
    let nquid = localStorage.getItem("nquid")

    if (!nquid) {
        nquid = JSON.parse(httpGet("/new_player")).uid
        localStorage.setItem("nquid", nquid)
    }

    const table = new gridjs.Grid({
        columns: ['Title', 'Creator'],
        server: {
            url: `/found_dreams?nquid=${nquid}`,
            then: data => data.map(dream =>
                [
                    gridjs.html(`<a href='${dream.dream_url}'>${dream.title}</a>`),
                    gridjs.html(`<a href='${dream.website_url}'>${dream.creator_name}</a>`)
                ]
            )
        }
    })

    table.render(document.getElementById("wrapper"));

    function httpGet(theUrl) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", theUrl, false); // false for synchronous request
        xmlHttp.send(null);
        return xmlHttp.responseText;
    }
</script>

<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />
</head>

<body>
    hello this is a test
    <div id="wrapper"></div>

    <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
    {# <script src="src/index.js"></script> #}
</body>

</html>